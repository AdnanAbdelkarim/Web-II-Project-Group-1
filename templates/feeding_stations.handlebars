<head>
    <meta charset="utf-8">
    <title>Information</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <base href="./">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <link rel="apple-touch-icon" sizes="57x57" href="assets/favicon/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="assets/favicon/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="assets/favicon/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="assets/favicon/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="assets/favicon/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="assets/favicon/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="assets/favicon/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="assets/favicon/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="assets/favicon/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="assets/favicon/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
        <link rel="manifest" href="assets/favicon/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="assets/favicon/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        <!-- Vendors styles-->
        <link rel="stylesheet" href="vendors/simplebar/css/simplebar.css">
        <link rel="stylesheet" href="css/vendors/simplebar.css">
        <!-- Main styles for this application-->
        <link href="css/style.css" rel="stylesheet">
        <!-- We use those styles to show code examples, you should remove them in your application.-->
        <link href="css/examples.css" rel="stylesheet">   
  </head>
  
  <div class="sidebar sidebar-dark sidebar-fixed" id="sidebar">
        
    <ul class="sidebar-nav" data-coreui="navigation" data-simplebar="">
      <li class="nav-item"><a class="nav-link" href="/dashboard">
          <svg class="nav-icon">
            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-speedometer"></use>
          </svg> Dashboard</a></li>
      {{#if isAdmin}}
      <li class="nav-item"><a class="nav-link" href="/adminGraph">
        <svg class="nav-icon">
        </svg> Admin Graph </a>
      </li>
      <li class="nav-item"><a class="nav-link" href="/admin_urgent">
        <svg class="nav-icon">
        </svg> Urgent Stations </a>
      </li>    
      {{/if}}
      <li class="nav-item"><a class="nav-link" href="/catcarerecord">
        <svg class="nav-icon">
        </svg> Add Record </a>
      </li>
      <li class="nav-item"><a class="nav-link" href="/blog">
        <svg class="nav-icon">
        </svg> Blog </a>
      </li>      
      </ul>
  </div>
  
  <div class="wrapper d-flex flex-column min-vh-100 bg-light">
    <header class="header header-sticky mb-4">
      <div class="container-fluid">
  
        <ul class="header-nav d-none d-md-flex">
        </ul>
        <ul class="header-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="/logout"> Log out </a>
          <li>
        </ul>
      </div>
      <div class="header-divider"></div>
      <div class="container-fluid">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb my-0 ms-2">
            <li class="breadcrumb-item">
              <!-- if breadcrumb is single--><span>Home</span>
            </li>
            <li class="breadcrumb-item active"><span>{{route}}</span></li>
          </ol>
        </nav>
      </div>
    </header>
    <div class="body flex-grow-1 px-3">
      <div class="container">
        <style>
table.feedingStation {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

table.feedingStation th, table.feedingStation td {
    padding: 12px;
    border-bottom: 1px solid #ddd;
    text-align: center;
}

table.feedingStation th {
    background-color: #f2f2f2;
    font-weight: bold;
    color: #333;
    text-transform: uppercase;
}

table.feedingStation td {
    background-color: #fff;
    color: #555;
}

.red {
    color:black;
    }

.status{
    color: green;
}
.urgent{
    color: red;
    font-weight: bold;
}
.issues{
    color: black;
}
.add{
    background-color: rgb(50, 31, 219);
    color: white;
}
</style>     
<table class="feedingStation">

    <tbody>
      {{#if isAdmin}}
        {{#each locations}}
          <tr>
            <td name="siteNum">{{this.number}}</td>
            <td>{{this.name}}</td>
            <td><a href="{{this.location}}">{{this.location}}</a></td>
            <td class="red">{{this.food_level}}</td>
            <td class="red">{{this.water_level}}</td>
            <td class="urgent">{{this.urgent_items}}</td>
            <td>{{this.cat_number}}</td>
            <td class="issues">{{this.health_issues}}</td>
            <td class="status">{{this.status}}</td>
            <td>
              <form action="/delete_feeding_location" method="POST">
                <input type="hidden" name="siteNum" value="{{this.number}}">
                <button class="delete" type="submit">Delete</button>
              </form>
            </td>
            <td>
              <form action="/update_feeding_station" method="GET">
                <input type="hidden" name="siteNum" value="{{this.number}}">
                <button class="update" type="submit">Update</button>
              </form>
            </td>
          </tr>
        {{/each}}
      {{else}}
        {{#each locations}}
          <tr>
            <td name="siteNum">{{this.number}}</td>
            <td>{{this.name}}</td>
            <td><a href="{{this.location}}">{{this.location}}</a></td>
            <td class="red">{{this.food_level}}</td>
            <td class="red">{{this.water_level}}</td>
            <td class="urgent">{{this.urgent_items}}</td>
            <td>{{this.cat_number}}</td>
            <td class="issues">{{this.health_issues}}</td>
            <td class="status">{{this.status}}</td>
          </tr>
        {{/each}}
      {{/if}}

  </tbody>
</table>
            
<script>
    const statusElements = document.querySelectorAll('.status');
    const statusElements1 = document.querySelectorAll('.red');
    const statusElements2 = document.querySelectorAll('.issues');
    statusElements.forEach(function(element) {
        if (element.textContent.toLocaleLowerCase() === 'inactive'.toLowerCase()) {
            element.style.color = 'red';
            }
            else if(element.textContent.toLocaleLowerCase() === 'active'.toLowerCase()){
                element.style.color = 'green';
            }
            });
    statusElements1.forEach(function(element) {
        const textContent = element.textContent.trim();
        console.log(`Text content: ${textContent}`);
        const number = parseFloat(textContent);
        if (!isNaN(number) && number < 50) {
            element.style.color = 'red';
        }
    });
    statusElements2.forEach(function(element) {
        if (element.textContent.toLocaleLowerCase() !== 'none'.toLowerCase()) {
            element.style.color = 'red';
            }
            });
</script>

</div>  
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
crossorigin="anonymous">
</script>
</html>